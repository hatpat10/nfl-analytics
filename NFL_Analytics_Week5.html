<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL Analytics Dashboard - Week 5</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        header p { font-size: 1.2em; opacity: 0.9; }
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            flex-wrap: wrap;
        }
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: 600;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        .tab:hover { color: #667eea; background: rgba(102, 126, 234, 0.1); }
        .tab.active { color: #667eea; border-bottom-color: #667eea; }
        .content { padding: 40px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .info-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        .info-box h3 { margin-bottom: 10px; font-size: 1.3em; }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .card h3 { color: #1e3c72; margin-bottom: 15px; }
        .metric-box {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }
        .metric-label { color: #6c757d; margin-top: 5px; }
        .expandable-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            margin-bottom: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .expandable-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .expandable-card.expanded {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }
        .card-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .card-main-info { flex: 1; }
        .card-main-info h4 { font-size: 1.2em; margin-bottom: 5px; }
        .card-subtitle { opacity: 0.9; font-size: 0.9em; }
        .card-highlight { text-align: right; }
        .card-stat-big { font-size: 2.2em; font-weight: 700; line-height: 1; }
        .card-stat-label { opacity: 0.8; font-size: 0.85em; margin-top: 5px; }
        .expand-icon {
            font-size: 1.5em;
            transition: transform 0.3s;
            margin-left: 15px;
        }
        .expandable-card.expanded .expand-icon { transform: rotate(180deg); }
        .card-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
            background: rgba(255,255,255,0.1);
        }
        .expandable-card.expanded .card-details { max-height: 1000px; }
        .card-details-content {
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.2);
        }
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .detail-item {
            background: rgba(255,255,255,0.1);
            padding: 12px;
            border-radius: 8px;
        }
        .detail-label { font-size: 0.85em; opacity: 0.8; margin-bottom: 5px; }
        .detail-value { font-size: 1.3em; font-weight: 600; }
        .detail-section { margin-top: 20px; }
        .detail-section h5 { font-size: 1.1em; margin-bottom: 10px; opacity: 0.9; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e9ecef; }
        th { background: #f8f9fa; font-weight: 600; color: #495057; }
        tr:hover { background: #f8f9fa; }
        footer {
            background: #f8f9fa;
            padding: 30px;
            text-align: center;
            color: #6c757d;
            border-top: 2px solid #e9ecef;
        }
        .game-card {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 20px;
        }
        .team-info { text-align: center; }
        .vs-divider { font-size: 1.5em; font-weight: bold; opacity: 0.6; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>NFL Analytics Dashboard</h1>
            <p>Week 5 - Data-Driven Football Analysis</p>
        </header>
        <div class="tabs">
            <div class="tab active" onclick="showTab('overview')">Overview</div>
            <div class="tab" onclick="showTab('games')">Game Predictions</div>
            <div class="tab" onclick="showTab('players')">Player Props</div>
            <div class="tab" onclick="showTab('explain')">How It Works</div>
        </div>
        <div class="content">
            <div id="overview" class="tab-content active">
                <div class="info-box">
                    <h3>What This Dashboard Shows</h3>
                    <p>This dashboard analyzes NFL games using statistics from every play. Click on any card to expand and see detailed analysis.</p>
                </div>
                <div class="grid">
                    <div class="metric-box">
                        <div class="metric-value">14</div>
                        <div class="metric-label">Games Analyzed</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-value">25</div>
                        <div class="metric-label">QBs Projected</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-value">45</div>
                        <div class="metric-label">RBs Projected</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-value">106</div>
                        <div class="metric-label">WRs Projected</div>
                    </div>
                </div>
                <div class="card">
                    <h3>Value Opportunities (Click to Expand)</h3>
                    <p>Games where the model disagrees significantly with Vegas:</p>
                    <div id="valueCards"></div>
                </div>
            </div>
            <div id="games" class="tab-content">
                <div class="info-box">
                    <h3>Game Predictions</h3>
                    <p>Based on EPA. Click on any game to see detailed matchup analysis.</p>
                </div>
                <div id="gamesCards"></div>
            </div>
            <div id="players" class="tab-content">
                <div class="info-box">
                    <h3>Player Projections</h3>
                    <p>Click on any player to see detailed stats and recent performance.</p>
                </div>
                <div class="card">
                    <h3>Top Quarterback Projections</h3>
                    <div id="qbCards"></div>
                </div>
                <div class="card">
                    <h3>Top Running Back Projections</h3>
                    <div id="rbCards"></div>
                </div>
                <div class="card">
                    <h3>Top Receiver Projections</h3>
                    <div id="wrCards"></div>
                </div>
            </div>
            <div id="explain" class="tab-content">
                <div class="card">
                    <h3>How This Model Works</h3>
                    <h4 style="margin-top: 25px; color: #667eea;">Step 1: Collect the Data</h4>
                    <p>Downloads every play from every NFL game this season.</p>
                    <h4 style="margin-top: 20px; color: #667eea;">Step 2: Calculate Team Strength</h4>
                    <p>Uses EPA (Expected Points Added) instead of just points scored.</p>
                    <h4 style="margin-top: 20px; color: #667eea;">Step 3: Predict Matchups</h4>
                    <p>Compares Team A offense vs Team B defense, and vice versa.</p>
                    <h4 style="margin-top: 20px; color: #667eea;">Step 4: Compare to Vegas</h4>
                    <p>When the model disagrees with Vegas by 2.5+ points, that indicates value.</p>
                    <h4 style="margin-top: 20px; color: #667eea;">Important Limitations</h4>
                    <ul style="margin: 15px 0 0 20px; line-height: 1.8;">
                        <li>Cannot predict injuries, weather, or coaching decisions</li>
                        <li>Football has inherent randomness</li>
                        <li>Model accuracy should be tested over multiple weeks</li>
                        <li>For research and analytical purposes</li>
                    </ul>
                </div>
            </div>
        </div>
        <footer>
            <p><strong>NFL Analytics Dashboard</strong> | Built for statistical analysis</p>
            <p style="margin-top: 10px; font-size: 0.9em;">Data source: nflverse | Week 5, 2025</p>
        </footer>
    </div>
    <script>
        const qbData = [{"player_name":"J.Herbert","team.x":"LAC","opponent":"WAS","is_home":true,"recent_avg":248.3333,"season_avg":265.75,"opp_yards_allowed":265.5,"projected_pass_yards":284.7,"team_color":"#007BC7","team_color2":"#ffc20e","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"D.Jones","team.x":"IND","opponent":"LV","is_home":true,"recent_avg":268.6667,"season_avg":269.5,"opp_yards_allowed":237,"projected_pass_yards":267.8,"team_color":"#002C5F","team_color2":"#a5acaf","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Goff","team.x":"DET","opponent":"CIN","is_home":false,"recent_avg":234.6667,"season_avg":232.25,"opp_yards_allowed":272.25,"projected_pass_yards":254.5,"team_color":"#0076B6","team_color2":"#B0B7BC","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"D.Prescott","team.x":"DAL","opponent":"NYJ","is_home":false,"recent_avg":310.3333,"season_avg":279.75,"opp_yards_allowed":208.5,"projected_pass_yards":248.6,"team_color":"#002244","team_color2":"#B0B7BC","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"C.Stroud","team.x":"HOU","opponent":"BAL","is_home":false,"recent_avg":214.6667,"season_avg":208,"opp_yards_allowed":271,"projected_pass_yards":229.8,"team_color":"#03202F","team_color2":"#A71930","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"R.Wilson","team.x":"NYG","opponent":"NO","is_home":false,"recent_avg":259.3333,"season_avg":259.3333,"opp_yards_allowed":221,"projected_pass_yards":229.3,"team_color":"#0B2265","team_color2":"#A71930","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"P.Mahomes","team.x":"KC","opponent":"JAX","is_home":false,"recent_avg":227,"season_avg":234.75,"opp_yards_allowed":246,"projected_pass_yards":226.4,"team_color":"#E31837","team_color2":"#FFB612","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Allen","team.x":"BUF","opponent":"NE","is_home":true,"recent_avg":190,"season_avg":241,"opp_yards_allowed":256,"projected_pass_yards":226.2,"team_color":"#00338D","team_color2":"#C60C30","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"B.Mayfield","team.x":"TB","opponent":"SEA","is_home":false,"recent_avg":245.6667,"season_avg":226,"opp_yards_allowed":227.5,"projected_pass_yards":216.4,"team_color":"#A71930","team_color2":"#322F2B","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"S.Darnold","team.x":"SEA","opponent":"TB","is_home":true,"recent_avg":251.6667,"season_avg":226.25,"opp_yards_allowed":208,"projected_pass_yards":211,"team_color":"#002244","team_color2":"#69be28","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"M.Stafford","team.x":"LA","opponent":"SF","is_home":true,"recent_avg":289.6667,"season_avg":278.5,"opp_yards_allowed":172.5,"projected_pass_yards":206.6,"team_color":"#003594","team_color2":"#FFD100","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Fields","team.x":"NYJ","opponent":"DAL","is_home":true,"recent_avg":157,"season_avg":157,"opp_yards_allowed":309.25,"projected_pass_yards":203.9,"team_color":"#003F2D","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"G.Smith","team.x":"LV","opponent":"IND","is_home":false,"recent_avg":195.3333,"season_avg":237,"opp_yards_allowed":236.5,"projected_pass_yards":200.6,"team_color":"#000000","team_color2":"#A5ACAF","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"S.Rattler","team.x":"NO","opponent":"NYG","is_home":true,"recent_avg":183.6667,"season_avg":191.25,"opp_yards_allowed":255.25,"projected_pass_yards":200.2,"team_color":"#D3BC8D","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"B.Young","team.x":"CAR","opponent":"MIA","is_home":true,"recent_avg":199.6667,"season_avg":188.25,"opp_yards_allowed":235.25,"projected_pass_yards":192.8,"team_color":"#0085CA","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null}];
        const rbData = [{"player_name":"T.Etienne","team.x":"JAX","opponent":"KC","is_home":true,"recent_avg":83.6667,"season_avg":98.5,"opp_yards_allowed":128.5,"projected_rush_yards":118.6,"team_color":"#006778","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Taylor","team.x":"IND","opponent":"LV","is_home":true,"recent_avg":114.3333,"season_avg":103.5,"opp_yards_allowed":103.5,"projected_rush_yards":117.3,"team_color":"#002C5F","team_color2":"#a5acaf","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Williams","team.x":"DAL","opponent":"NYJ","is_home":false,"recent_avg":86,"season_avg":78,"opp_yards_allowed":132,"projected_rush_yards":109.3,"team_color":"#002244","team_color2":"#B0B7BC","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"A.Kamara","team.x":"NO","opponent":"NYG","is_home":true,"recent_avg":70.3333,"season_avg":64,"opp_yards_allowed":154.5,"projected_rush_yards":107.9,"team_color":"#D3BC8D","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"Q.Judkins","team.x":"CLE","opponent":"MIN","is_home":true,"recent_avg":79,"season_avg":79,"opp_yards_allowed":131,"projected_rush_yards":106.6,"team_color":"#FF3C00","team_color2":"#311D00","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Dobbins","team.x":"DEN","opponent":"PHI","is_home":false,"recent_avg":86.6667,"season_avg":80.75,"opp_yards_allowed":126,"projected_rush_yards":106.2,"team_color":"#002244","team_color2":"#FB4F14","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Gibbs","team.x":"DET","opponent":"CIN","is_home":false,"recent_avg":84,"season_avg":67.75,"opp_yards_allowed":136.5,"projected_rush_yards":105.8,"team_color":"#0076B6","team_color2":"#B0B7BC","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"D.Montgomery","team.x":"DET","opponent":"CIN","is_home":false,"recent_avg":73.3333,"season_avg":61.25,"opp_yards_allowed":136.5,"projected_rush_yards":93.5,"team_color":"#0076B6","team_color2":"#B0B7BC","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"K.Williams","team.x":"LA","opponent":"SF","is_home":true,"recent_avg":79,"season_avg":75.75,"opp_yards_allowed":116.75,"projected_rush_yards":93.4,"team_color":"#003594","team_color2":"#FFD100","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Cook","team.x":"BUF","opponent":"NE","is_home":true,"recent_avg":119,"season_avg":100.25,"opp_yards_allowed":78.25,"projected_rush_yards":89.9,"team_color":"#00338D","team_color2":"#C60C30","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"C.Hubbard","team.x":"CAR","opponent":"MIA","is_home":true,"recent_avg":53.3333,"season_avg":54.25,"opp_yards_allowed":158.75,"projected_rush_yards":87.8,"team_color":"#0085CA","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"D.Achane","team.x":"MIA","opponent":"CAR","is_home":false,"recent_avg":63.6667,"season_avg":61.5,"opp_yards_allowed":130.75,"projected_rush_yards":82.1,"team_color":"#008E97","team_color2":"#F58220","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"O.Hampton","team.x":"LAC","opponent":"WAS","is_home":true,"recent_avg":74,"season_avg":67.5,"opp_yards_allowed":108.75,"projected_rush_yards":80,"team_color":"#007BC7","team_color2":"#ffc20e","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Fields","team.x":"NYJ","opponent":"DAL","is_home":true,"recent_avg":59.3333,"season_avg":59.3333,"opp_yards_allowed":124.75,"projected_rush_yards":76.2,"team_color":"#003F2D","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"A.Jeanty","team.x":"LV","opponent":"IND","is_home":false,"recent_avg":81.3333,"season_avg":70.5,"opp_yards_allowed":96.5,"projected_rush_yards":74.3,"team_color":"#000000","team_color2":"#A5ACAF","team.y":null,"position":null,"headshot_url":null,"gsis_id":null}];
        const wrData = [{"player_name":"P.Nacua","team.x":"LA","opponent":"SF","is_home":true,"recent_avg":124.3333,"season_avg":125.75,"projected_rec_yards":127.4,"team_color":"#003594","team_color2":"#FFD100","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Smith-Njigba","team.x":"SEA","opponent":"TB","is_home":true,"recent_avg":92.6667,"season_avg":100.5,"projected_rec_yards":97.7,"team_color":"#002244","team_color2":"#69be28","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Jefferson","team.x":"MIN","opponent":"CLE","is_home":false,"recent_avg":94,"season_avg":81.5,"projected_rec_yards":89,"team_color":"#4F2683","team_color2":"#FFC62F","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"Q.Johnston","team.x":"LAC","opponent":"WAS","is_home":true,"recent_avg":86,"season_avg":84.25,"projected_rec_yards":87,"team_color":"#007BC7","team_color2":"#ffc20e","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"G.Pickens","team.x":"DAL","opponent":"NYJ","is_home":false,"recent_avg":90,"season_avg":75,"projected_rec_yards":84,"team_color":"#002244","team_color2":"#B0B7BC","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"A.St. Brown","team.x":"DET","opponent":"CIN","is_home":false,"recent_avg":87.3333,"season_avg":76.75,"projected_rec_yards":83.1,"team_color":"#0076B6","team_color2":"#B0B7BC","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"R.Pearsall","team.x":"SF","opponent":"LA","is_home":false,"recent_avg":73,"season_avg":81.75,"projected_rec_yards":76.5,"team_color":"#AA0000","team_color2":"#B3995D","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"G.Wilson","team.x":"NYJ","opponent":"DAL","is_home":true,"recent_avg":72,"season_avg":77.75,"projected_rec_yards":75.8,"team_color":"#003F2D","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"J.Chase","team.x":"CIN","opponent":"DET","is_home":true,"recent_avg":79.3333,"season_avg":66,"projected_rec_yards":75.5,"team_color":"#FB4F14","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"N.Collins","team.x":"HOU","opponent":"BAL","is_home":false,"recent_avg":78.3333,"season_avg":65,"projected_rec_yards":73,"team_color":"#03202F","team_color2":"#A71930","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"D.Adams","team.x":"LA","opponent":"SF","is_home":true,"recent_avg":72.6667,"season_avg":67.25,"projected_rec_yards":71.9,"team_color":"#003594","team_color2":"#FFD100","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"T.Hill","team.x":"MIA","opponent":"CAR","is_home":false,"recent_avg":75,"season_avg":66.25,"projected_rec_yards":71.5,"team_color":"#008E97","team_color2":"#F58220","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"E.Egbuka","team.x":"TB","opponent":"SEA","is_home":false,"recent_avg":71.6667,"season_avg":70.5,"projected_rec_yards":71.2,"team_color":"#A71930","team_color2":"#322F2B","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"T.McMillan","team.x":"CAR","opponent":"MIA","is_home":true,"recent_avg":70,"season_avg":69.5,"projected_rec_yards":71.2,"team_color":"#0085CA","team_color2":"#000000","team.y":null,"position":null,"headshot_url":null,"gsis_id":null},{"player_name":"C.McCaffrey","team.x":"SF","opponent":"LA","is_home":false,"recent_avg":70.6667,"season_avg":71.25,"projected_rec_yards":70.9,"team_color":"#AA0000","team_color2":"#B3995D","team.y":null,"position":null,"headshot_url":null,"gsis_id":null}];
        const oddsData = [{"matchup_key":"TEN at ARI","ev_tier":"ðŸ”¥ ELITE","edge":11.1,"vegas_line":-8.6,"model_line":2.5,"bet_recommendation":"BET ARI -8.6 (-128)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"NE at BUF","ev_tier":"ðŸ”¥ ELITE","edge":11.1,"vegas_line":-8.6,"model_line":2.5,"bet_recommendation":"BET BUF -8.6 (-131)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"LV at IND","ev_tier":"ðŸ”¥ ELITE","edge":10.5,"vegas_line":-8,"model_line":2.5,"bet_recommendation":"BET IND -8.0 (-137)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"DET at CIN","ev_tier":"ðŸ”¥ ELITE","edge":-9.5,"vegas_line":12,"model_line":2.5,"bet_recommendation":"BET DET -12.0 (+114)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"DEN at PHI","ev_tier":"ðŸ”¥ ELITE","edge":7.6,"vegas_line":-5.1,"model_line":2.5,"bet_recommendation":"BET PHI -5.1 (-116)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"TB at SEA","ev_tier":"ðŸ”¥ ELITE","edge":6.5,"vegas_line":-4,"model_line":2.5,"bet_recommendation":"BET SEA -4.0 (-120)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"WAS at LAC","ev_tier":"ðŸ”¥ ELITE","edge":5.9,"vegas_line":-3.4,"model_line":2.5,"bet_recommendation":"BET LAC -3.4 (-128)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"NYG at NO","ev_tier":"ðŸ”¥ ELITE","edge":5.3,"vegas_line":-2.8,"model_line":2.5,"bet_recommendation":"BET NO -2.8 (-116)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"DAL at NYJ","ev_tier":"â­ STRONG","edge":4.2,"vegas_line":-1.7,"model_line":2.5,"bet_recommendation":"BET NYJ -1.7 (-120)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"KC at JAX","ev_tier":"â­ STRONG","edge":-3.974,"vegas_line":4.5,"model_line":0.526,"bet_recommendation":"BET KC -4.0 (-125)","confidence":"MEDIUM","sportsbook":"Market Average (Free Tier)"},{"matchup_key":"MIN at CLE","ev_tier":"âœ“ GOOD","edge":-2,"vegas_line":4.5,"model_line":2.5,"bet_recommendation":"BET MIN -4.0 (-125)","confidence":"LOW","sportsbook":"Market Average (Free Tier)"}];
        const gamesData = [{"game":"SF at LA","home_team":"LA","away_team":"SF","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"MIN at CLE","home_team":"CLE","away_team":"MIN","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"HOU at BAL","home_team":"BAL","away_team":"HOU","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"MIA at CAR","home_team":"CAR","away_team":"MIA","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"LV at IND","home_team":"IND","away_team":"LV","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"NYG at NO","home_team":"NO","away_team":"NYG","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"DAL at NYJ","home_team":"NYJ","away_team":"DAL","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"DEN at PHI","home_team":"PHI","away_team":"DEN","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"TEN at ARI","home_team":"ARI","away_team":"TEN","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"TB at SEA","home_team":"SEA","away_team":"TB","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"DET at CIN","home_team":"CIN","away_team":"DET","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"WAS at LAC","home_team":"LAC","away_team":"WAS","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"NE at BUF","home_team":"BUF","away_team":"NE","home_epa_advantage":0,"away_epa_advantage":0,"net_home_advantage":0,"projected_margin":2.5},{"game":"KC at JAX","home_team":"JAX","away_team":"KC","home_epa_advantage":0.1471,"away_epa_advantage":0.2787,"net_home_advantage":-0.1316,"projected_margin":0.526}];
        
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }
        
        function toggleCard(cardId) {
            document.getElementById(cardId).classList.toggle('expanded');
        }
        
        function formatStat(value, decimals = 1) {
            if (value === null || value === undefined) return '-';
            return typeof value === 'number' ? value.toFixed(decimals) : value;
        }
        function createPlayerCard(player, index, type) {
            const cardId = `${type}-card-${index}`;
            const yardKey = type === 'qb' ? 'projected_pass_yards' : 
                           type === 'rb' ? 'projected_rush_yards' : 'projected_rec_yards';
            const label = type === 'qb' ? 'Pass Yards' : 
                         type === 'rb' ? 'Rush Yards' : 'Rec Yards';
            const teamKey = player.team || player["team.x"] || player["team.y"] || '-';
            
            console.log("Player data:", player);
            
            let detailsHTML = `<div class="card-details-content"><div class="detail-grid">`;
            if (type === 'qb') {
                detailsHTML += `
                    <div class="detail-item"><div class="detail-label">Avg Pass Yards</div>
                    <div class="detail-value">${formatStat(player.avg_pass_yards || player.season_avg_pass_yards, 0)}</div></div>
                    <div class="detail-item"><div class="detail-label">Recent Form</div>
                    <div class="detail-value">${formatStat(player.recent_avg_pass_yards || player.recent_pass_yards, 0)}</div></div>
                    <div class="detail-item"><div class="detail-label">Pass TDs/Game</div>
                    <div class="detail-value">${formatStat(player.avg_pass_td || player.season_avg_pass_td)}</div></div>
                    <div class="detail-item"><div class="detail-label">Completions</div>
                    <div class="detail-value">${formatStat(player.avg_completions || player.season_avg_completions, 1)}</div></div>`;
            } else if (type === 'rb') {
                detailsHTML += `
                    <div class="detail-item"><div class="detail-label">Avg Rush Yards</div>
                    <div class="detail-value">${formatStat(player.avg_rush_yards || player.season_avg_rush_yards, 0)}</div></div>
                    <div class="detail-item"><div class="detail-label">Recent Form</div>
                    <div class="detail-value">${formatStat(player.recent_avg_rush_yards || player.recent_rush_yards, 0)}</div></div>
                    <div class="detail-item"><div class="detail-label">Rush TDs/Game</div>
                    <div class="detail-value">${formatStat(player.avg_rush_td || player.season_avg_rush_td)}</div></div>
                    <div class="detail-item"><div class="detail-label">Carries/Game</div>
                    <div class="detail-value">${formatStat(player.avg_carries || player.season_avg_carries, 1)}</div></div>`;
            } else {
                detailsHTML += `
                    <div class="detail-item"><div class="detail-label">Avg Rec Yards</div>
                    <div class="detail-value">${formatStat(player.avg_rec_yards || player.season_avg_rec_yards, 0)}</div></div>
                    <div class="detail-item"><div class="detail-label">Recent Form</div>
                    <div class="detail-value">${formatStat(player.recent_avg_rec_yards || player.recent_rec_yards, 0)}</div></div>
                    <div class="detail-item"><div class="detail-label">Rec TDs/Game</div>
                    <div class="detail-value">${formatStat(player.avg_rec_td || player.season_avg_rec_td)}</div></div>
                    <div class="detail-item"><div class="detail-label">Targets/Game</div>
                    <div class="detail-value">${formatStat(player.avg_targets || player.season_avg_targets, 1)}</div></div>`;
            }
            detailsHTML += `</div><div class="detail-section"><h5>Performance Analysis</h5>
                <div class="detail-grid"><div class="detail-item"><div class="detail-label">Games Played</div>
                <div class="detail-value">${player.games_played || player.games || '-'}</div></div>
                <div class="detail-item"><div class="detail-label">Opponent Defense</div>
                <div class="detail-value">${player.opponent || '-'}</div></div></div></div></div>`;
            return `<div class="expandable-card" id="${cardId}" onclick="toggleCard('${cardId}')">
                <div class="card-header"><div class="card-main-info"><h4>${player.player_name}</h4>
                <div class="card-subtitle">${teamKey} vs ${player.opponent || '-'}</div></div>
                <div class="card-highlight"><div class="card-stat-big">${Math.round(player[yardKey] || 0)}</div>
                <div class="card-stat-label">${label}</div></div><div class="expand-icon">â–¼</div></div>
                <div class="card-details">${detailsHTML}</div></div>`;
        }
        function createGameCard(game, index) {
            const cardId = `game-card-${index}`;
            const detailsHTML = `<div class="card-details-content"><div class="detail-section">
                <h5>Team Statistics</h5><div class="detail-grid">
                <div class="detail-item"><div class="detail-label">Home EPA/Play</div>
                <div class="detail-value">${formatStat(game.home_epa)}</div></div>
                <div class="detail-item"><div class="detail-label">Away EPA/Play</div>
                <div class="detail-value">${formatStat(game.away_epa)}</div></div>
                <div class="detail-item"><div class="detail-label">Home Advantage</div>
                <div class="detail-value">${formatStat(game.net_home_advantage)}</div></div>
                <div class="detail-item"><div class="detail-label">Proj Margin</div>
                <div class="detail-value">${formatStat(game.projected_margin)}</div></div></div></div>
                <div class="detail-section"><h5>Offense vs Defense</h5><div class="detail-grid">
                <div class="detail-item"><div class="detail-label">Home Off EPA</div>
                <div class="detail-value">${formatStat(game.home_offense_epa)}</div></div>
                <div class="detail-item"><div class="detail-label">Away Def EPA</div>
                <div class="detail-value">${formatStat(game.away_defense_epa)}</div></div>
                <div class="detail-item"><div class="detail-label">Away Off EPA</div>
                <div class="detail-value">${formatStat(game.away_offense_epa)}</div></div>
                <div class="detail-item"><div class="detail-label">Home Def EPA</div>
                <div class="detail-value">${formatStat(game.home_defense_epa)}</div></div>
                </div></div></div>`;
            return `<div class="expandable-card" id="${cardId}" onclick="toggleCard('${cardId}')">
                <div class="card-header"><div class="card-main-info"><div class="game-card">
                <div class="team-info"><h4>${game.away_team}</h4><div class="card-subtitle">Away</div></div>
                <div class="vs-divider">@</div>
                <div class="team-info"><h4>${game.home_team}</h4><div class="card-subtitle">Home</div></div>
                </div></div><div class="card-highlight"><div class="card-stat-big">${formatStat(Math.abs(game.projected_margin))}</div>
                <div class="card-stat-label">${game.projected_margin > 0 ? game.home_team : game.away_team} by</div>
                </div><div class="expand-icon">â–¼</div></div><div class="card-details">${detailsHTML}</div></div>`;
        }
        
        function createValueCard(odds, index) {
            const cardId = `value-card-${index}`;
            const detailsHTML = `<div class="card-details-content"><div class="detail-section">
                <h5>Betting Analysis</h5><div class="detail-grid">
                <div class="detail-item"><div class="detail-label">Edge</div>
                <div class="detail-value">${formatStat(odds.edge)} pts</div></div>
                <div class="detail-item"><div class="detail-label">Confidence</div>
                <div class="detail-value">${odds.confidence || '-'}</div></div>
                <div class="detail-item"><div class="detail-label">Model Line</div>
                <div class="detail-value">${formatStat(odds.model_spread)}</div></div>
                <div class="detail-item"><div class="detail-label">Vegas Line</div>
                <div class="detail-value">${formatStat(odds.vegas_spread)}</div></div></div></div>
                <div class="detail-section"><h5>Recommendation</h5>
                <p style="opacity: 0.9; line-height: 1.6;">${odds.bet_recommendation || 'No specific recommendation'}</p>
                </div></div>`;
            return `<div class="expandable-card" id="${cardId}" onclick="toggleCard('${cardId}')">
                <div class="card-header"><div class="card-main-info"><h4>${odds.matchup_key}</h4>
                <div class="card-subtitle">${odds.ev_tier}</div></div><div class="card-highlight">
                <div class="card-stat-big">${formatStat(Math.abs(odds.edge))}</div>
                <div class="card-stat-label">Edge (pts)</div></div><div class="expand-icon">â–¼</div></div>
                <div class="card-details">${detailsHTML}</div></div>`;
        }
        
        document.getElementById('qbCards').innerHTML = qbData.map((p, i) => createPlayerCard(p, i, 'qb')).join('');
        document.getElementById('rbCards').innerHTML = rbData.map((p, i) => createPlayerCard(p, i, 'rb')).join('');
        document.getElementById('wrCards').innerHTML = wrData.map((p, i) => createPlayerCard(p, i, 'wr')).join('');
        document.getElementById('gamesCards').innerHTML = gamesData.map((g, i) => createGameCard(g, i)).join('');
        document.getElementById('valueCards').innerHTML = oddsData.map((o, i) => createValueCard(o, i)).join('');
    </script>
</body>
</html>
